{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lisajl/Code/case-study/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lisajl/Code/case-study/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";export var getAIMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userQuery){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"User query:\",userQuery);// Log the user query for debugging\n_context.next=4;return fetch(\"http://127.0.0.1:5000/api/get_answer\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({query:userQuery})// Send query as JSON\n});case 4:response=_context.sent;console.log(\"Response status:\",response.status);// Log status for debugging\n// Ensure the response is OK before parsing\nif(response.ok){_context.next=8;break;}return _context.abrupt(\"return\",{role:\"assistant\",content:\"Server returned an error: \".concat(response.status)});case 8:_context.next=10;return response.json();case 10:data=_context.sent;// Parse the response JSON\nconsole.log(\"Backend response:\",data);// Log the response data\nif(!data.error){_context.next=14;break;}return _context.abrupt(\"return\",{role:\"assistant\",content:\"Error: \".concat(data.error)});case 14:return _context.abrupt(\"return\",{role:\"assistant\",content:data.answer// Return the answer from the backend\n});case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);console.error(\"Error:\",_context.t0);// Log any error from the fetch\nreturn _context.abrupt(\"return\",{role:\"assistant\",content:\"An error occurred while communicating with the server.\"});case 21:case\"end\":return _context.stop();}},_callee,null,[[0,17]]);}));return function getAIMessage(_x){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["getAIMessage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userQuery","response","data","wrap","_callee$","_context","prev","next","console","log","fetch","method","headers","body","JSON","stringify","query","sent","status","ok","abrupt","role","content","concat","json","error","answer","t0","stop","_x","apply","arguments"],"sources":["/Users/lisajl/Code/case-study/frontend/src/api/api.js"],"sourcesContent":["export const getAIMessage = async (userQuery) => {\n  try {\n    console.log(\"User query:\", userQuery);  // Log the user query for debugging\n    const response = await fetch(\"http://127.0.0.1:5000/api/get_answer\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ query: userQuery }),  // Send query as JSON\n    });\n\n    console.log(\"Response status:\", response.status); // Log status for debugging\n\n    // Ensure the response is OK before parsing\n    if (!response.ok) {\n      return {\n        role: \"assistant\",\n        content: `Server returned an error: ${response.status}`,\n      };\n    }\n\n    const data = await response.json();  // Parse the response JSON\n    console.log(\"Backend response:\", data);  // Log the response data\n\n    if (data.error) {\n      return {\n        role: \"assistant\",\n        content: `Error: ${data.error}`,\n      };\n    }\n\n    return {\n      role: \"assistant\",\n      content: data.answer,  // Return the answer from the backend\n    };\n  } catch (error) {\n    console.error(\"Error:\", error);  // Log any error from the fetch\n    return {\n      role: \"assistant\",\n      content: \"An error occurred while communicating with the server.\",\n    };\n  }\n};\n"],"mappings":"wQAAA,MAAO,IAAM,CAAAA,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,SAAS,MAAAC,QAAA,CAAAC,IAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAExCE,OAAO,CAACC,GAAG,CAAC,aAAa,CAAET,SAAS,CAAC,CAAG;AAAAK,QAAA,CAAAE,IAAA,SACjB,CAAAG,KAAK,CAAC,sCAAsC,CAAE,CACnEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,KAAK,CAAEhB,SAAU,CAAC,CAAI;AAC/C,CAAC,CAAC,QANIC,QAAQ,CAAAI,QAAA,CAAAY,IAAA,CAQdT,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAER,QAAQ,CAACiB,MAAM,CAAC,CAAE;AAElD;AAAA,GACKjB,QAAQ,CAACkB,EAAE,EAAAd,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAe,MAAA,UACP,CACLC,IAAI,CAAE,WAAW,CACjBC,OAAO,8BAAAC,MAAA,CAA+BtB,QAAQ,CAACiB,MAAM,CACvD,CAAC,SAAAb,QAAA,CAAAE,IAAA,UAGgB,CAAAN,QAAQ,CAACuB,IAAI,CAAC,CAAC,SAA5BtB,IAAI,CAAAG,QAAA,CAAAY,IAAA,CAA2B;AACrCT,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAEP,IAAI,CAAC,CAAG;AAAA,IAErCA,IAAI,CAACuB,KAAK,EAAApB,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAe,MAAA,UACL,CACLC,IAAI,CAAE,WAAW,CACjBC,OAAO,WAAAC,MAAA,CAAYrB,IAAI,CAACuB,KAAK,CAC/B,CAAC,iBAAApB,QAAA,CAAAe,MAAA,UAGI,CACLC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAEpB,IAAI,CAACwB,MAAS;AACzB,CAAC,UAAArB,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAsB,EAAA,CAAAtB,QAAA,aAEDG,OAAO,CAACiB,KAAK,CAAC,QAAQ,CAAApB,QAAA,CAAAsB,EAAO,CAAC,CAAG;AAAA,OAAAtB,QAAA,CAAAe,MAAA,UAC1B,CACLC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,wDACX,CAAC,2BAAAjB,QAAA,CAAAuB,IAAA,MAAA7B,OAAA,iBAEJ,kBA1CY,CAAAL,YAAYA,CAAAmC,EAAA,SAAAlC,IAAA,CAAAmC,KAAA,MAAAC,SAAA,OA0CxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}